<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper plugin-docs plugin-id-lab docs-version-current docs-doc-page docs-doc-id-lab03/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Lab 3: Timers, Pulse Width Modulation (PWM) | Microprocessor Architecture</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://upb-fils-am-fr.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://upb-fils-am-fr.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://upb-fils-am-fr.github.io/lab/lab03"><meta data-rh="true" property="og:locale" content="en_GB"><meta data-rh="true" property="og:locale:alternate" content="fr"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-lab-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-lab-current"><meta data-rh="true" property="og:title" content="Lab 3: Timers, Pulse Width Modulation (PWM) | Microprocessor Architecture"><meta data-rh="true" name="description" content="Helpful chapters from the ATmega324P Datasheet"><meta data-rh="true" property="og:description" content="Helpful chapters from the ATmega324P Datasheet"><link data-rh="true" rel="icon" href="/img/sigla_am.ico"><link data-rh="true" rel="canonical" href="https://upb-fils-am-fr.github.io/lab/lab03"><link data-rh="true" rel="alternate" href="https://upb-fils-am-fr.github.io/lab/lab03" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://upb-fils-am-fr.github.io/fr/lab/lab03" hreflang="fr"><link data-rh="true" rel="alternate" href="https://upb-fils-am-fr.github.io/lab/lab03" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f442cfaf.css">
<script src="/assets/js/runtime~main.c9cc2831.js" defer="defer"></script>
<script src="/assets/js/main.432a33b9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/sigla_am.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sigla_am.svg" alt="Microprocessor Architecture" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/sigla_am.svg" alt="Microprocessor Architecture" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Microprocessor Architecture</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/lab">Lab</a><a class="navbar__item navbar__link" href="/project">Project</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/lab/lab03" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-GB">English</a></li><li><a href="/fr/lab/lab03" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Fran√ßais</a></li></ul></div><a href="https://github.com/UPB-FILS-AM-FR/am-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lab">General Lab Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lab/lab00">Laboratory 0: Introductory Applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lab/lab01">Laboratory 1: USART. Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lab/lab02">Laboratory 2: Interrupts, Timers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/lab/lab03">Lab 3: Timers, Pulse Width Modulation (PWM)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lab/lab04">Lab 4: Analog to Digital Converter (ADC)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lab/lab05">Lab 5: SPI (Serial Peripheral Interface)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lab/lab06">Lab 6: I2C (Inter-Integrated Circuit)</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 3: Timers, Pulse Width Modulation (PWM)</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Lab 3: Timers, Pulse Width Modulation (PWM)</h1></header>
<p><strong>Helpful chapters from the <a href="https://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-42743-ATmega324P_Datasheet.pdf" target="_blank" rel="noopener noreferrer">ATmega324P Datasheet</a></strong></p>
<ul>
<li>
<ol>
<li>Pin Configurations ‚Äì section 1.1, page 15</li>
</ol>
</li>
<li>
<ol start="16">
<li>8-bit Timer/Counter0 with PWM ‚Äì section 16.9, page 140</li>
</ol>
</li>
<li>
<ol start="17">
<li>16-bit Timer/Counter1 with PWM ‚Äì section 17.14, page 173</li>
</ol>
</li>
<li>
<ol start="19">
<li>8-bit Timer/Counter2 with PWM and asynchronous operation ‚Äì section 19.11, page 202</li>
</ol>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-pulse-width-modulation">1. Pulse Width Modulation<a href="#1-pulse-width-modulation" class="hash-link" aria-label="Direct link to 1. Pulse Width Modulation" title="Direct link to 1. Pulse Width Modulation">‚Äã</a></h2>
<p><strong>PWM</strong> (Pulse Width Modulation) is a technique used to control the voltage applied to an electronic device by quickly switching it between ON and OFF states.</p>
<p>This rapid switching results in an average voltage determined by the time the signal stays ON versus the total cycle time ‚Äî this ratio is called the <strong>duty cycle</strong>.</p>
<p><img decoding="async" loading="lazy" alt="PWM Principle" src="/assets/images/main-qimg-72a9c6569290abe0a85dceabaf8c7ff9-bce705736a7ef84c46ac6f32d18efb5c.gif" width="561" height="210" class="img_ev3q"></p>
<p>PWM allows <strong>digital control</strong> over <strong>analog signals</strong> ‚Äî for instance:</p>
<ul>
<li>Dimming an LED</li>
<li>Changing the color of RGB LEDs</li>
<li>Setting the pitch of a buzzer</li>
<li>Adjusting the speed of a motor</li>
</ul>
<p><img decoding="async" loading="lazy" alt="PWM LED Control" src="/assets/images/pwm_led-99e7e25dfc8515e2e21b4990787538d0.gif" width="1200" height="600" class="img_ev3q"></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-operating-principle">1.1. Operating Principle<a href="#11-operating-principle" class="hash-link" aria-label="Direct link to 1.1. Operating Principle" title="Direct link to 1.1. Operating Principle">‚Äã</a></h3>
<p>The duty cycle is expressed as a percentage of the ON time relative to the total cycle:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mi mathvariant="normal">%</mi><mo stretchy="false">]</mo><mo>=</mo><mfrac><msub><mi>t</mi><mrow><mi>o</mi><mi>n</mi></mrow></msub><mrow><msub><mi>t</mi><mrow><mi>o</mi><mi>n</mi></mrow></msub><mo>+</mo><msub><mi>t</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi></mrow></msub></mrow></mfrac><mo>‚ãÖ</mo><mn>100</mn><mo>=</mo><mfrac><mrow><mi>p</mi><mi>u</mi><mi>l</mi><mi>s</mi><mi>e</mi><mi mathvariant="normal">_</mi><mi>w</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi></mrow><mrow><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow></mfrac><mo>‚ãÖ</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">D[\%] = \frac{t_{on}}{t_{on} + t_{off}} \cdot 100 = \frac{pulse\_width}{period} \cdot 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="mopen">[</span><span class="mord">%</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.2642em;vertical-align:-0.9721em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2921em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em">ff</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">‚ãÖ</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">100</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.2749em;vertical-align:-0.8804em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3944em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.02778em">er</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.7em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">se</span><span class="mord" style="margin-right:0.02778em">_</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">‚ãÖ</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">100</span></span></span></span></span>
<p>The <strong>average voltage</strong> received by a device is:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>V</mi><mo>Àâ</mo></mover><mo>=</mo><mi>D</mi><mo>‚ãÖ</mo><msub><mi>V</mi><mrow><mi>c</mi><mi>c</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\bar{V} = D \cdot V_{cc}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8201em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.22222em">V</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.25em"><span class="mord">Àâ</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">‚ãÖ</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">cc</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>
<p><img decoding="async" loading="lazy" alt="PWM waveforms with different duty cycles" src="/assets/images/avr_pwm_01-3245bf91318e95f2f01586ece2f266bd.jpg" width="987" height="237" class="img_ev3q"></p>
<p>PWM signals are typically generated by digital circuits and microcontrollers. The ATmega324 uses a <strong>counter</strong> that resets periodically and compares its value with a reference (<code>OCRn</code>). When the counter exceeds the reference value, the PWM output toggles its state.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>üõ†Ô∏è PWM via software?</summary><div><div class="collapsibleContent_i85q"><p>PWM can also be implemented in software using methods like:</p><ul>
<li>Bit-banging</li>
<li>Timers with ISR</li>
</ul><p>But for high-frequency PWM (e.g., kHz range for motors), hardware PWM is far more efficient, avoiding CPU overhead from frequent interrupts.</p></div></div></details>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-pwm-on-avr-microcontrollers">2. PWM on AVR Microcontrollers<a href="#2-pwm-on-avr-microcontrollers" class="hash-link" aria-label="Direct link to 2. PWM on AVR Microcontrollers" title="Direct link to 2. PWM on AVR Microcontrollers">‚Äã</a></h2>
<p>In the previous lab, we saw that the ATmega324 has three timers:</p>
<ul>
<li><code>Timer0</code> (8-bit)</li>
<li><code>Timer1</code> (16-bit)</li>
<li><code>Timer2</code> (8-bit)</li>
</ul>
<p>Each timer can be configured via the control registers <code>TCCRnA</code> and <code>TCCRnB</code>, using the <code>WGMnx</code> bits to select the mode:</p>
<ul>
<li><strong>Normal</strong></li>
<li><strong>CTC (Clear Timer on Compare Match)</strong></li>
<li><strong>Fast PWM</strong> (used today!)</li>
<li><strong>Phase Correct PWM</strong>, etc.</li>
</ul>
<p>Each timer has two output compare channels: <code>OCnA</code> and <code>OCnB</code>. These are tied to specific physical pins. Check the <strong>Pin Configurations</strong> chapter of the datasheet for exact mappings:</p>
<p><img decoding="async" loading="lazy" alt="PWM Output Pins on ATmega324P" src="/assets/images/atmega324_pwm_pins-dd3744f2406886328e68cc7fe0b62027.png" width="799" height="643" class="img_ev3q"></p>
<p>Today we‚Äôll focus on <strong>Fast PWM</strong>, a common mode suitable for general applications like LED dimming and motor speed control.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fast-pwm">Fast PWM<a href="#fast-pwm" class="hash-link" aria-label="Direct link to Fast PWM" title="Direct link to Fast PWM">‚Äã</a></h3>
<p>In <strong>Fast PWM</strong> mode, the timer counts only on the <strong>rising edge</strong> of the clock signal. The duty cycle changes take effect immediately, but the waveform is not centered ‚Äî a shift or glitch may appear when changing the duty cycle significantly.</p>
<p>Several Fast PWM modes are available for different timers. For <strong>Timer1</strong>, you have:</p>
<ul>
<li>Fast PWM, 8-bit: TOP = 0x00FF</li>
<li>Fast PWM, 9-bit: TOP = 0x01FF</li>
<li>Fast PWM, 10-bit: TOP = 0x03FF</li>
<li>Fast PWM with TOP in <code>ICR</code></li>
<li>Fast PWM with TOP in <code>OCRnA</code></li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>üí°</div><div class="admonitionContent_BuS1"><p>In this lab, we‚Äôll use only <strong>Fast PWM 8-bit mode</strong>. Refer to the datasheet for other timer-specific modes and features.</p></div></div>
<hr>
<p>Suppose Timer1 is configured in <strong>Fast PWM</strong> mode. This mode has a fixed frequency and allows the duty cycle (threshold) to be modified during execution.</p>
<ul>
<li>With mode <code>10</code> for <code>COM1A1:COM1A0</code>, the signal on pin <code>OC1A</code> stays HIGH during counting up to the threshold, and LOW afterwards until the end of the cycle.</li>
<li>To get a duty cycle of <code>x%</code>, set:<br>
<code>OCR1A = x * TOP / 100</code><br>
<!-- -->where <code>TOP</code> is 255 (8-bit), 511 (9-bit), or 1023 (10-bit), depending on configuration.</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-timer1-in-fast-pwm-8-bit-non-inverting-mode-with-1024-prescaler">Example: Timer1 in Fast PWM 8-bit, non-inverting mode with 1024 prescaler<a href="#example-timer1-in-fast-pwm-8-bit-non-inverting-mode-with-1024-prescaler" class="hash-link" aria-label="Direct link to Example: Timer1 in Fast PWM 8-bit, non-inverting mode with 1024 prescaler" title="Direct link to Example: Timer1 in Fast PWM 8-bit, non-inverting mode with 1024 prescaler">‚Äã</a></h4>
<p>PWM frequency ‚âà 12 MHz / 1024 / 255 ‚âà <strong>45 Hz</strong></p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* OC1A is PD5, must be configured as OUTPUT */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DDRB </span><span class="token operator" style="color:#393A34">|=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> PD5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* Select Fast PWM 8-bit mode: WGM[3:0] = 0b0101 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* WGM10 and WGM11 -&gt; TCCR1A; WGM12 and WGM13 -&gt; TCCR1B */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TCCR1A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> WGM10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TCCR1B </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> WGM12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* Set non-inverting mode on OC1A: COM1A[1:0] = 0b10 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TCCR1A </span><span class="token operator" style="color:#393A34">|=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> COM1A1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* Set prescaler to 1024: CS1[2:0] = 0b101 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TCCR1B </span><span class="token operator" style="color:#393A34">|=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> CS12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> CS10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* Set 50% duty cycle (TOP = 255, so OCR1A = 127) */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OCR1A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-correct-pwm">Phase Correct PWM<a href="#phase-correct-pwm" class="hash-link" aria-label="Direct link to Phase Correct PWM" title="Direct link to Phase Correct PWM">‚Äã</a></h3>
<p>Although we won‚Äôt use this in the lab, it‚Äôs useful to understand how <strong>Phase Correct PWM</strong> differs from Fast PWM ‚Äî it offers better accuracy, often required for <strong>BLDC motors or audio</strong>.</p>
<p><strong>Key difference</strong>: the counter counts up from BOTTOM to TOP, then back down to BOTTOM.</p>
<ul>
<li>Output is set based on comparison with <code>OCRnx</code>, just like Fast PWM.</li>
<li>However, <code>OCRnx</code> remains constant during the full cycle, resulting in stable ON durations and <strong>cleaner</strong> signals.</li>
<li>This avoids frequency shifts (jitter) ‚Äî important for motors, which can lose efficiency due to inconsistent PWM.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Phase Correct PWM Timing" src="/assets/images/phase_correct_pwm-0813510f0ec626ea0e4a3968225159b6.png" width="943" height="520" class="img_ev3q"></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="comparison-fast-pwm-vs-phase-correct-pwm">Comparison: Fast PWM vs Phase Correct PWM<a href="#comparison-fast-pwm-vs-phase-correct-pwm" class="hash-link" aria-label="Direct link to Comparison: Fast PWM vs Phase Correct PWM" title="Direct link to Comparison: Fast PWM vs Phase Correct PWM">‚Äã</a></h3>
<p><img decoding="async" loading="lazy" alt="Fast PWM (left) vs Phase Correct PWM (right)" src="/assets/images/merged_pwm_waveforms-72cf59564a76502f5e36cd7e61eb619c.png" width="2074" height="1000" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-exercises">3. Exercises<a href="#3-exercises" class="hash-link" aria-label="Direct link to 3. Exercises" title="Direct link to 3. Exercises">‚Äã</a></h2>
<p>The goal of these exercises is to control the color of an RGB LED using PWM. You can produce any color by adjusting the brightness of each diode (Red, Green, Blue) independently!</p>
<p>The RGB LED pins are connected as follows:</p>
<ul>
<li><strong>Red</strong>: pin <code>PD5</code>, function <code>OC1A</code> (linked to Timer1)</li>
<li><strong>Green</strong>: pin <code>PD7</code>, function <code>OC2A</code> (linked to Timer2)</li>
<li><strong>Blue</strong>: pin <code>PB3</code>, function <code>OC0A</code> (linked to Timer0)</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Reminder</div><div class="admonitionContent_BuS1"><p>The RGB LED is wired with <strong>common anode</strong> / &quot;active-low&quot; configuration ‚Äî the LED turns ON when the pin is set to LOW, and OFF when set to HIGH.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-0">Task 0<a href="#task-0" class="hash-link" aria-label="Direct link to Task 0" title="Direct link to Task 0">‚Äã</a></h3>
<ol>
<li>Download and run the <a href="https://ocw.cs.pub.ro/courses/_media/pm/lab/lab3-2023-2024/lab3-skel-2023-2024.zip" target="_blank" rel="noopener noreferrer">starter project ZIP</a>.<!-- -->
<ul>
<li>What do you observe on the board?</li>
<li>Check the serial monitor ‚Äî do you remember how timing was handled in the previous lab?</li>
<li>How does the LED behave? Which timer is used and in what mode?</li>
<li>Where is the intensity updated? What input does the formula use, and where is the output applied?</li>
</ul>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-1">Task 1<a href="#task-1" class="hash-link" aria-label="Direct link to Task 1" title="Direct link to Task 1">‚Äã</a></h3>
<ol>
<li>Let‚Äôs make the <strong>blue</strong> LED behave similarly.<!-- -->
<ul>
<li>Use Timer0 (<code>OC0A</code> on <code>PB3</code>) in <strong>Fast PWM</strong> mode.</li>
<li>Be sure to check <strong>Section 12.9</strong> in the <a href="https://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-42743-ATmega324P_Datasheet.pdf" target="_blank" rel="noopener noreferrer">ATmega324P Datasheet</a> for proper register usage ‚Äî Timer0&#x27;s registers differ from Timer1&#x27;s!</li>
<li>Make the blue LED <strong>pulse faster</strong> than red, and in <strong>parallel</strong>.</li>
<li>What do you notice?</li>
</ul>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-2">Task 2<a href="#task-2" class="hash-link" aria-label="Direct link to Task 2" title="Direct link to Task 2">‚Äã</a></h3>
<ol>
<li>Time to turn on the <strong>green</strong> LED!<!-- -->
<ul>
<li>Challenge: <code>PD7</code> (OC2A) is used by Timer2, which is already used for <code>millis()</code> system ticks...</li>
<li>Solution: We‚Äôll generate PWM manually using <strong>interrupts</strong>:<!-- -->
<ul>
<li>Timer2 counts from 0 to 188 and triggers an interrupt via <code>COMPA</code> (to increment <code>systicks</code>).</li>
<li>Timer2‚Äôs second comparator <code>COMPB</code> triggers an interrupt at a value between 0‚Äì188.</li>
<li>In <code>COMPA ISR</code>: turn ON green LED ‚Üí set GPIO LOW.</li>
<li>In <code>COMPB ISR</code>: turn OFF green LED ‚Üí set GPIO HIGH.</li>
<li>Duty cycle is given by <code>OCR2B</code>.</li>
</ul>
</li>
</ul>
</li>
</ol>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Keep <code>OCR2A = 188</code> to retain proper <code>millis()</code> timing.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-3">Task 3<a href="#task-3" class="hash-link" aria-label="Direct link to Task 3" title="Direct link to Task 3">‚Äã</a></h3>
<ol>
<li>Cycle through all colors using <strong>HSV color space</strong>:<!-- -->
<ul>
<li>Convert HSV ‚Üí RGB using provided <code>convert_HSV_to_RGB()</code> function.</li>
<li>Let <code>Hue</code> animate over time, keep <code>Saturation = 1</code>, <code>Value = 1</code> (for full brightness).</li>
<li>Use system ticks to animate the color smoothly, just like LED pulsing.</li>
<li>Make sure to disable any conflicting code that modifies LED intensity.</li>
</ul>
</li>
</ol>
<p><img decoding="async" loading="lazy" alt="HSV Color Wheel" src="/assets/images/hue-wheel-c49e6582240e8af2ccba3fa0b5d56475.png" width="650" height="555" class="img_ev3q"></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-4-bonus">Task 4 (Bonus)<a href="#task-4-bonus" class="hash-link" aria-label="Direct link to Task 4 (Bonus)" title="Direct link to Task 4 (Bonus)">‚Äã</a></h3>
<ol>
<li>Use the <strong>speaker</strong> connected to <code>PD4</code> (also <code>OC1B</code>) to <strong>play a melody</strong> from the <code>sound.c</code> module.<!-- -->
<ul>
<li><code>surprise_notes[]</code> contains frequencies.</li>
<li><code>durations[]</code> stores note durations.</li>
<li>In <code>update_notes()</code>, reconfigure Timer1 each time a new note is played.<!-- -->
<ul>
<li>Use <strong>CTC mode</strong> (<code>OCR1A</code> sets the TOP ‚Üí controls frequency).</li>
<li>Set <code>OCR1B = OCR1A / 2</code> for 50% duty cycle (square wave).</li>
<li>Call <code>update_notes()</code> every <strong>25ms</strong> using <code>systicks</code>.</li>
<li>Reset <code>TCNT1 = 0</code> after changing <code>OCR1A</code> to avoid timing delays.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bonus-2">Bonus 2<a href="#bonus-2" class="hash-link" aria-label="Direct link to Bonus 2" title="Direct link to Bonus 2">‚Äã</a></h3>
<p>Combine:</p>
<ul>
<li>RGB animation (HSV cycling) <strong>and</strong></li>
<li>Sound playback (melody via speaker)</li>
</ul>
<p>‚Äî both running <strong>simultaneously</strong> and smoothly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-useful-links">4. Useful Links<a href="#4-useful-links" class="hash-link" aria-label="Direct link to 4. Useful Links" title="Direct link to 4. Useful Links">‚Äã</a></h2>
<ul>
<li>[1] <a href="http://www.afrotechmods.com/groovy/PWM_tutorial/PWM_tutorial.htm" target="_blank" rel="noopener noreferrer">PWM Video Tutorial</a></li>
<li>[2] <a href="http://www.avrfreaks.net/index.php?name=PNphpBB2&amp;file=printview&amp;t=68302" target="_blank" rel="noopener noreferrer">AVR Freaks PWM Guide</a></li>
<li>[3] <a href="https://docs.arduino.cc/tutorials/generic/secrets-of-arduino-pwm" target="_blank" rel="noopener noreferrer">Arduino PWM Secrets</a></li>
<li>[4] <a href="https://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-42743-ATmega324P_Datasheet.pdf" target="_blank" rel="noopener noreferrer">ATmega324P Datasheet</a></li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/lab/lab02"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Laboratory 2: Interrupts, Timers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/lab/lab04"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab 4: Analog to Digital Converter (ADC)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-pulse-width-modulation" class="table-of-contents__link toc-highlight">1. Pulse Width Modulation</a><ul><li><a href="#11-operating-principle" class="table-of-contents__link toc-highlight">1.1. Operating Principle</a></li></ul></li><li><a href="#2-pwm-on-avr-microcontrollers" class="table-of-contents__link toc-highlight">2. PWM on AVR Microcontrollers</a><ul><li><a href="#fast-pwm" class="table-of-contents__link toc-highlight">Fast PWM</a></li><li><a href="#phase-correct-pwm" class="table-of-contents__link toc-highlight">Phase Correct PWM</a></li><li><a href="#comparison-fast-pwm-vs-phase-correct-pwm" class="table-of-contents__link toc-highlight">Comparison: Fast PWM vs Phase Correct PWM</a></li></ul></li><li><a href="#3-exercises" class="table-of-contents__link toc-highlight">3. Exercises</a><ul><li><a href="#task-0" class="table-of-contents__link toc-highlight">Task 0</a></li><li><a href="#task-1" class="table-of-contents__link toc-highlight">Task 1</a></li><li><a href="#task-2" class="table-of-contents__link toc-highlight">Task 2</a></li><li><a href="#task-3" class="table-of-contents__link toc-highlight">Task 3</a></li><li><a href="#task-4-bonus" class="table-of-contents__link toc-highlight">Task 4 (Bonus)</a></li><li><a href="#bonus-2" class="table-of-contents__link toc-highlight">Bonus 2</a></li></ul></li><li><a href="#4-useful-links" class="table-of-contents__link toc-highlight">4. Useful Links</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://ocw.cs.pub.ro/courses/pm" target="_blank" rel="noopener noreferrer" class="footer__link-item">UPB Open CourseWare <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 Politehnica Bucharest. <br> This pages are the translated and adapted version from https://ocw.cs.pub.ro/courses/pm</div></div></div></footer></div>
</body>
</html>